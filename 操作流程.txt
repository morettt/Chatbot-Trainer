
开源项目：Chatbot-Trainer
开源链接：https://github.com/morettt/Chatbot-Trainer

这是一个开源项目，让您能够轻松打造专属的AI聊天助手。无论是模仿您自己的说话风格，还是复刻名人、动漫角色的语言特征，都能轻松实现。

核心特点：
简单的训练方式: 仅需提供音频文件，系统就能自动完成从语音到训练数据的转换
高效语音识别: 采用达摩院开源，文字转换准确率高达98%
智能化处理: 自动将文本转化为标准对话格式，大幅简化数据处理流程
灵活的模型选择: 支持GPT-4和本地GLM模型两种处理方案

首先部署模型：
bash /root/Chatbot-Trainer/chuli/部署模型.sh

接下来您就可以通过下方的介绍一步步的开始制作属于你的模型了。您可以通过上传音频文件来直接训练出你喜欢的那个主播或者任何角色！音频可以是自己的说话录音、主播的聊天录音、电台录音等等等等。这些录音都会被处理成文字并拿去训练！


《1.语音转文字》

将你的音频放到左边的：“音频” 文件夹里面。保证格式是mp3或者wav格式，且尽量不要有背景音乐，以及保证音频内容是单人的。(我在里面放了一个“杂谈.wav” 主要是用来给大家参考用的，可以删除，替换成自己收集的音频，音频名字无所谓，只要保证格式是mp3或者wav就行了，你放在这个文件夹下面的所有音频都会进行处理。)
接下来执行音频转文本：
bash /root/Chatbot-Trainer/chuli/半自动.sh 

（这一步就是把你的音频转换为了文字，输出到了这个路径下面：Chatbot-Trainer/输出文本/输入内容.txt 这一步做好以后可以查看“输入内容.txt”里面有没有不对的或者有没有句子不通顺、错别字。可以手动修改一下。因为接下来的处理就是直接依赖这个文件制作数据集。 ）

《2.数据集制作》

做好上一步后，就可以开始将语音转为文字的文本制作为客训练的数据了
运行这个指令开始处理：
bash /root/Chatbot-Trainer/chuli/全自动.sh

上面的指令用的是GPT4 模型进行推理的，效果更好，但是有限额，我充了25刀。可能用不了多久。所以我还做了一个基于本地glm4-9b-chat 模型，如果发现上面的指令不能用了，可能就是额度被用完了，那么可以用下面的这个指令用本地的模型处理：

首先打开一个终端启动API：
bash /root/Chatbot-Trainer/chuli/跨域API.sh

接着再打开一个终端运行：
bash /root/Chatbot-Trainer/chuli/全自动GLM版本.sh


结尾:指令运行好后，你上传的那些音频文件全都变成了可以训练的数据集了。经过数据处理后，你的数据已经制作完成了，可以用于训练。你可以前往微信公众号：AI会思考   发送：Chatbot  关键词来获取此镜像的视频教程。也可以根据下面的文字介绍自行开始模型的训练。



《3.训练》


数据集制作好以后，就可以开始模型的训练了。找到左侧的这个文件：lora.yaml
其中不要管别的东西，只需要关注：max_steps 参数 关注参数 save_steps  这个参数的意思是每到多少步时候，保存一次模型。我这里是设置了50步。你可以按照自己的
需要调整。最后记得保存。设置好了以后直接运行这个指令就开始微调了：

bash /root/Chatbot-Trainer/chuli/lora微调/lora训练.sh  
#（提示：观察loss下降的值，下降到0.5~0.9以内就可以手动中断停止训练了。）

训练完了后，打开左侧的：推理.py 
在21行那里，会有一个这样的显示：

MODEL_PATH = os.environ.get('MODEL_PATH', '/root/Chatbot-Trainer/output/你的模型')

其中你需要将最后面的那个模型名字替换掉。替换成你刚刚训练好的模型保存点，训练好的模型可能会有很多，在：output 这个文件夹下面，也许有这样的：checkpoint-100  这个后面的数字
越大代表训练的轮数越多，可以选一个你认为可以的，然后粘贴替换掉模型名字，就像这样：

MODEL_PATH = os.environ.get('MODEL_PATH', '/root/Chatbot-Trainer/output/checkpoint-200')

最后保存，接着就可以推理lora模型了:

bash /root/Chatbot-Trainer/chuli/lora微调/推理.sh


QQ群：982391222
个人微信：wzx123wzx12